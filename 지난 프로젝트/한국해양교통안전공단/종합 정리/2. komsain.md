>로그인처리
---
1. DB 확인 -> SSO 초기화/인증 -> 세션에 komsaUserVo 형태로 데이터를 넣음
2. 인증 확인은 세션에서 확인
```java
//helper 호출
KomsaUserVO komsaUserVO = (KomsaUserVO) KomsaUserHelper.getAuthenticatedUser();
```
```java
//helper 내부
public static Object getAuthenticatedUser() {
    if (cmnComUserService.getAuthenticatedUser() == null) {
        return new KomsaUserVO();
    }
    return cmnComUserService.getAuthenticatedUser();
}
```
```java
//세션 확인
public Object getAuthenticatedUser() {
    return RequestContextHolder.getRequestAttributes().getAttribute("komsaUserVO", RequestAttributes.SCOPE_SESSION);
}
```
>화면구성
---
    * 메인
        1. 메인메뉴 목록 : 메인메뉴 클릭 시 각 항목에 맞는 페이지로 이동
        2. 포틀릿 : ajax를 통해 데이터를 불러옴
        3. 숨은화면 : SSO 세션 갱신 및 activex 호출을 위한 화면 

<img src="./img/메인화면.png" width="50%" height="50%"/>



    * 메뉴 화면 공통
        1. 상단메뉴 : 홈, 메인메뉴 이동, sms전송등의 메뉴 구성
        2. 서브메뉴 : 서브메뉴 이동
        3. 좌측메뉴 : 서브메뉴 하위항목 구성
        4. 탭 영역 : 각 화면은 탭(tabObject)으로 분리되어있으며 이동이 가능
```js
//tabobject 구조체
tabObject:function(objStr){
    var tabObjStr = $(__activeTabObj).data("tabPageObject");
    var tabObjStrList = [];
    var objStrList = [];
    if(this.isEmpty(tabObjStr)){
        tabObjStr = "";
    }
    if(this.isNotEmpty(tabObjStr)){
        tabObjStrList = tabObjStr.split(",");
    }
    if(this.isNotEmpty(objStr)){
        objStrList = objStr.split(",");
    }
    $.each(objStrList,function(idx,pPbjStr){
        if(tabObjStrList.indexOf(pPbjStr) == -1 && !komsaUtil.isEmpty(pPbjStr)){
            tabObjStrList.push(pPbjStr);
        }
    });
    $(__activeTabObj).data("tabPageObject",tabObjStrList.join());
}
```
```js
//화면의 요소 탐색 시 __activeTabObj로 구분
$("#rndBbiBsnsInfoListSDate", __activeTabObj).val();
```
        5. 화면 : 작업할 내용이 구성되어있는 화면

<img src="./img/메뉴화면 공통.png" width="50%" height="50%"/>

>선박검사 처리 로직
---
1. 화면 공통(검색, DB처리)
    * form 내부의 파라미터들을 serializeObject() 함수를 통해 전달
    * serializeObject() 함수로 파라마터의 내용은 name로 구분
        - param.'name' = value;
    * 파라미터가 잔존해야하는 경우 model -> \<input type="hidden"> 에 값 삽입
```js
var param = $("form[name='searchForm']",__activeTabObj).serializeObject();
```
2. 선박검사 프로세스

<img src="./img/선박검사 프로세스.png" width="50%" height="50%"/>


>전자결재 연동
---
1. 그룹웨어
    * 기본 프로세스는 표준과 동일
    * ezApprovalSHIPDAO.getConnDataList(pMap) 함수 통한 추가 파라미터를 별도의 mapper로 DB에서 가져옴
    * end시점 연동은 선박검사쪽 페이지 호출 로 처리
```java
resultList = ezApprovalSHIPDAO.getConnDataList(pMap);
```
```java
@SuppressWarnings("unchecked")
public List<Map<String, Object>> getConnDataList(Map<String, Object> map) throws Exception {    
    String sqlMapId = "ezSHIP." + map.get("formCd");
    return sqlMapClient.queryForList(sqlMapId, map);
}
```
2. 선박검사
    * 초기 그룹웨어 호출 시 선박검사 DB에 insert
    * 그룹웨어 결재 완료시점에 선박검사 페이지 호출 시 데이터 업데이트 및 트리거로 선박검사 테이블 데이터 업데이트



>외부 솔루션
---


1. SSO
    * komsain, 그룹웨어, ERP, E감사, CBTES SSO 연동
2. ozReport
    * 선박검사 데이터 문서 조회, 또는 pdf 변환시 사용
3. DAMO
    * 개인정보 DB암호화
4. rMatechart
    * 운항관리, 통계 등에 사용
5. SMS
    * LGU+ 에서 제공하는 에이전트를 사용하며 DB INSERT 시 자동 발송
>사용 오픈소스
---
    * 도로명주소
        * 사용자 생성 시 주소검색
    * itextpdf
        * 기사란 html -> pdf 변환시 사용
    * pdf.js
        * edms 에서 pdf 문서 조회 시 사용
>기타 작업내용
-------
 * 추가 확인 필요사항
   * 세금계산서 연동
   * pdf 뷰어
   * 배치 구동 방식
   * 로깅처리
   * 권한 구성 -> 이걸 설명할 필요 있을까?